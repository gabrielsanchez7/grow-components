import { html } from 'lit';
import { ifDefined } from 'lit/directives/if-defined.js';
import { unsafeHTML } from 'lit/directives/unsafe-html.js';
import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs';
import "./gr-button";

<Meta
  title="Grow/Button"
  component="gr-button"
  argTypes={{
    label: {
      control: { type: 'text' }
    },
    size: {
      options: ['small', 'medium', 'large'],
      default: 'medium',
      control: { type: 'select' }
    },
    type: {
      options: ['boxed', 'outline', 'negative', 'inline'],
      default: 'boxed',
      control: { type: 'select' }
    },
    icon: {
      control: { type: 'text' }
    },
    iconPosition: {
      options: ['leading', 'trailing', 'center'],
      default: 'center',
      control: 'select'
    },
    state: {
      options: ['loading', 'disabled'],
      control: 'select'
    }
  }}
/>

export const ButtonTemplate = (args) => {
  return html`<gr-button
    id="${ifDefined(args.id)}"
    label="${ifDefined(args.label)}"
    size="${ifDefined(args.size)}"
    type="${ifDefined(args.type)}"
    status="${ifDefined(args.status)}"
    icon-position=${ifDefined(args.iconPosition)}
    @gr-click="${ifDefined(args.handleClick)}"
  >${ifDefined(unsafeHTML(args.icon))}</gr-button>`
}

export const ButtonSizes = (args) => html`
${ButtonTemplate({label: 'Large button', size: 'large', ...args})}
${ButtonTemplate({label: 'Medium button', size: 'medium', ...args})}
${ButtonTemplate({label: 'Small button', size: 'small', ...args})}
`

export const ButtonStyles = (args) => html`
${ButtonTemplate({label: 'Boxed button', type: 'boxed', ...args})}
${ButtonTemplate({label: 'Outline button', type: 'outline', ...args})}
${ButtonTemplate({label: 'Negative button', type: 'negative', ...args})}
${ButtonTemplate({label: 'Inline button', type: 'inline', ...args})}
`

export const ButtonIcons = (args) => html`
${ButtonTemplate({label: 'Leading icon', iconPosition: 'leading', icon:'<i slot="icon" class="fa-solid fa-gear"></i>', ...args})}
${ButtonTemplate({label: 'Trailing icon', iconPosition: 'trailing', icon:'<i slot="icon" class="fa-solid fa-gear"></i>', ...args})}
${ButtonTemplate({iconPosition: 'center', icon:'<i slot="icon" class="fa-solid fa-gear"></i>', ...args})}
`

export const ButtonStates = (args) => html`
${ButtonTemplate({label: 'Loading button', status: 'loading', ...args})}
${ButtonTemplate({label: 'Disabled button', status: 'disabled', ...args})}
`

export const ButtonClick = (args) => {
  const handleClick = (e) => {
    const target = e.target
    target.setAttribute('status', 'loading')

    setTimeout(() => target.removeAttribute('status'), 3000)
  }
  return html`${ButtonTemplate({label: 'Click on me', handleClick, id: 'button-load', ...args})}`
}

<Canvas>
  <Story name="Sizes">
    {ButtonSizes.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story name="Styles">
    {ButtonStyles.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story name="Icons">
    {ButtonIcons.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story name="States">
    {ButtonStates.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story name="Click to load">
    {ButtonClick.bind({})}
  </Story>
</Canvas>

<ArgsTable of="gr-button" />